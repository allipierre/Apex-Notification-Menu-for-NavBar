var notificationMenu=function(){"use strict";return{initialize:function(a,o,e,r){function s(a){if(o)apex.server.plugin(o,{pageItems:r},{success:a,error:function(a){l.empty(),console.log(a.responseText),l.append("<span>Error occured please check console for more information</span>")},dataType:"json"});else try{c(dataJSON)}catch(e){console.log("need data json"),console.log(e)}}function d(){var a=$("<li></li>");a.addClass("t-NavigationBar-item");var o=$("<div></div>");return a.append(o),$(".t-NavigationBar").prepend(a),o}function c(o){var e=$("<div></div>");e.addClass("toggleNotifications"),e.attr("id",a+"_toggleNote"),e.attr("toggled","true");var r="#"+a+"_ul";e.click(function(){var a="false"==e.attr("toggled")?"true":"false";e.attr("toggled",a),$(r).fadeToggle("fast")}),$(document).on("touchstart click",function(a){!e.is(a.target)&&0===e.has(a.target).length&&!$(a.target).parents(r).length>0&&"false"==e.attr("toggled")&&(e.attr("toggled",!0),$(r).fadeToggle("fast"))});var n=$("<div></div>");n.addClass("count"),e.append(n);var i=$("<div></div>");i.addClass("num"),i.css("background",t.counterBackgroundColor),i.css("color",t.counterFontColor),i.attr("id",a+"_numdiv"),i.html(o.row.length),n.append(i);var s=$("<label></label>");s.addClass("show"),s.css("background",t.mainIconBackgroundColor),s.attr("for",a+"_navtoggle");var d=$("<i></i>");d.addClass("fa"),d.addClass(t.mainIcon),d.css("color",t.mainIconColor),t.mainIconBlinking&&d.addClass("fa-blink"),s.append(d),e.append(s),l.append(e),g(o)}function g(o){var e="#"+a+"_toggleNote";if($(e).hide(),o.row){var r="#"+a+"_numdiv",n="#"+a+"_ul";o.row.length>0?($(e).show(),$(r).html(o.row.length),$(n).remove(),f($(e),o)):($(n).remove(),$(r).html("0"))}}function f(o,e){var r=$("<ul></ul>");r.attr("id",a+"_ul"),r.addClass("notifications"),r.addClass("notificationstoggle");var n="#"+a+"_toggleNote";if("false"==$(n).attr("toggled")&&r.toggle(),e.row)for(var l=0;l<e.row.length;l++){var i=$("<a></a>");e.row[l].NOTE_LINK&&(i.attr("href",e.row[l].NOTE_LINK),t.linkTargetBlank&&i.attr("target","_blank"));var s=$("<li></li>");s.addClass("note"),e.row[l].NOTE_COLOR&&s.css("box-shadow","-5px 0 0 0 "+e.row[l].NOTE_COLOR);var d=$("<div></div>");d.addClass("note-header");var c=$("<i></i>");c.addClass("fa"),e.row[l].NOTE_ICON&&c.addClass(e.row[l].NOTE_ICON),e.row[l].NOTE_ICON_COLOR&&c.css("color",e.row[l].NOTE_ICON_COLOR),c.addClass("fa-lg"),d.append(c),e.row[l].NOTE_HEADER&&d.append(e.row[l].NOTE_HEADER),s.append(d);var g=$("<span></span>");g.addClass("note-info"),e.row[l].NOTE_TEXT&&g.html(e.row[l].NOTE_TEXT),s.append(g),i.append(s),r.append(i)}$("body").append(r)}var n={refresh:0,mainIcon:"fa-bell",mainIconColor:"white",mainIconBackgroundColor:"rgba(70,70,70,0.9)",mainIconBlinking:!1,counterBackgroundColor:"rgb(232, 55, 55 )",counterFontColor:"white",linkTargetBlank:!0},t={},l=d();if("string"==typeof e)try{t=JSON.parse(e)}catch(i){console.log("Error while try to parse udConfigJSON. Please check your Config JSON. Standard Config will be used."),console.log(i),console.log(e),t={}}else t=e;try{t=$.extend(!0,n,t)}catch(i){console.log("Error while try to merge udConfigJSON into Standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.log(i),t=n,console.log(t)}s(c),t.refresh>0&&setInterval(function(){0==l.children("span").length&&(o?s(g):g(dataJSON))},1e3*t.refresh)}}}();